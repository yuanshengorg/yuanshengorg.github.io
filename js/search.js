var searchAll,searchFunc=function(e,t,r){"use strict";$.ajax({url:e,dataType:"xml",complete:function(e){var a=$("entry",function(e){if(document.all){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return(new DOMParser).parseFromString(e,"text/xml")}(e.responseText)).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),l=(document.getElementById(t),document.getElementById(r));searchAll=function(e){var t='<ul class="search-result-list">',r=e.trim().toLowerCase().trim().split(/[\s\-]+/);if(l.innerHTML="",!(e.trim().length<=0)){if(a.forEach(function(e){var a=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var l=e.title.trim().toLowerCase(),s=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),n=e.url,o=-1,i=-1,c=-1;if(""!==s?r.forEach(function(e,t){o=l.indexOf(e),i=s.indexOf(e),o<0&&i<0?a=!1:(i<0&&(i=0),0==t&&(c=i))}):a=!1,a){var u=n.split("/"),h=u[1]+"/"+u[2]+"/"+u[3];t+="<li><a href='"+n+"'><span class='post-title' title='"+l+"'>"+l+"</span><span class='post-date' title='"+h+"'>"+h+"</span></a>";var m=e.content.trim().replace(/<[^>]+>/g,"");if(c>=0){var p=c-20,f=c+80;p<0&&(p=0),0==p&&(f=100),f>m.length&&(f=m.length);var v=m.substr(p,f);r.forEach(function(e){var t=new RegExp(e,"gi");v=v.replace(t,'<em class="search-keyword">'+e+"</em>")}),t+='<p class="search-result">'+v+"...</p>"}t+="</li>"}}),t+="</ul>",-1===t.indexOf("<li>"))return l.innerHTML="<ul><span class='local-search-empty'>没有找到内容，更换下搜索词试试吧~<span></ul>";l.innerHTML=t,$(document).pjax("#local-search-result a",".pjax",{fragment:".pjax",timeout:8e3}),$("#local-search-result a").mouseenter(function(e){$("#local-search-result a.hover").removeClass("hover"),$(this).addClass("hover")}),$("#local-search-result a").mouseleave(function(e){$(this).removeClass("hover")})}}},error:function(e,t,r){console.log("文章中出现特殊字符，导致解析xml出现问题，系统自动采用第二方案：进行主动解析！！！ 请检查全文搜索是否有问题，如出现问题，请及时在 https://github.com/yelog/hexo-theme-3-hexo/issues 中提出来，作者会尽快处理！")}})};